{"mappings":"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","sources":["src/script.js"],"sourcesContent":["'use strict';\n\nconst countries = document.querySelector('.countries');\nconst btnNav = document.querySelector('.go-down');\nconst section1 = document.querySelector('#section1');\nconst navArrow = document.querySelector('.nav-arrow');\nconst header = document.querySelector('#header');\nconst countryInfo = document.querySelector('.country-data');\nconst form = document.querySelector('.form');\nconst inputQeury = document.querySelector('.form__input');\n\nclass App {\n  #map;\n  #markers = [];\n  #mapZoomLevel = 3;\n  #countryData = {};\n  #coords = [];\n  #weatherData;\n  #mapEvent;\n\n  constructor() {\n    // Get user's position\n    this._getPosition();\n    btnNav.addEventListener('click', function () {\n      section1.scrollIntoView({ behavior: 'smooth' });\n    });\n    navArrow.addEventListener('click', function () {\n      header.scrollIntoView({ behavior: 'smooth' });\n    });\n    this._sliderListener();\n    form.addEventListener('submit', this._countryQuery.bind(this));\n  }\n\n  _sliderListener() {\n    countryInfo.addEventListener('click', function (e) {\n      if (e.target.closest('#slider'))\n        section1.scrollIntoView({ behavior: 'smooth' });\n    });\n  }\n\n  _getPosition() {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        this._loadMap.bind(this),\n        function () {\n          alert('Could not get your position');\n        }\n      );\n    }\n  }\n\n  _mapLoadAsync(position) {\n    const { latitude } = position.coords;\n    const { longitude } = position.coords;\n\n    const coords = [latitude, longitude];\n    this.#map = L.map('map').setView(coords, this.#mapZoomLevel);\n\n    L.tileLayer('https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png', {\n      attribution:\n        '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n    }).addTo(this.#map);\n\n    // Handling clicks on map\n    this.#map.on('click', this._showInfo.bind(this));\n  }\n\n  _renderInfos() {\n    this._renderCurrInfo();\n    this._clearCountryInfoField();\n    if (this.#countryData) delete this.#countryData[0];\n  }\n\n  _getDataByCode = async function (code) {\n    try {\n      const countryData = await this._getJSON(\n        `https://countries-api-836d.onrender.com/countries/alpha/${code}`,\n        'Country code is invalid. Try again!'\n      );\n      this.#countryData = countryData;\n      this.#coords = countryData.latlng;\n      this._renderInfos();\n    } catch (err) {\n      this._renderErr(err);\n    }\n  };\n\n  _getDataByName = async function (country) {\n    try {\n      const [countryData] = await this._getJSON(\n        `https://countries-api-836d.onrender.com/countries/name/${country}`,\n        'Country name is invalid. Try again!'\n      );\n\n      this.#countryData = countryData;\n      this.#coords = countryData.latlng;\n      this._renderInfos();\n    } catch (err) {\n      this._renderErr(err);\n    }\n  };\n\n  _countryQuery(e) {\n    const validInputs = (...inputs) =>\n      inputs.every(inp => Number.isFinite(inp));\n    e.preventDefault();\n    const data = inputQeury.value.trim().toLowerCase();\n    inputQeury.value = '';\n    // country code query\n    try {\n      if (data.length === 2) {\n        this._getDataByCode.call(this, data);\n      }\n      // country name query\n      if (!data.includes(',') && data.length > 2) {\n        const nameCountry = data[0].toUpperCase() + data.slice(1);\n        this._getDataByName.call(this, nameCountry);\n      }\n      // coordinates query\n      if (Number.isFinite(+data[0])) {\n        const coords = data.split(',').map(num => +num.trim());\n        if (!validInputs(...coords))\n          throw new Error(\n            \"Check your input. It can't be validate correctly ....\"\n          );\n        if (validInputs(...coords)) {\n          this.#coords = coords;\n          this._getCountryData(...coords);\n        }\n      }\n    } catch (err) {\n      this._renderErr(err);\n    }\n  }\n\n  _clearMarkers() {\n    if (this.#markers.length) {\n      this.#map.removeLayer(this.#markers[0]);\n      this.#markers.splice(0, 1);\n    }\n  }\n\n  _clearCountryInfoField() {\n    if (document.querySelectorAll('.country-info'))\n      document.querySelectorAll('.country-info').forEach(e => e.remove());\n  }\n\n  _clearCountryField() {\n    if (document.querySelector('.country')) {\n      document.querySelector('.country').remove();\n      countries.style.opacity = 0;\n    }\n  }\n\n  _loadErrorInfo = function (err) {\n    this._clearCountryInfoField();\n    const html = `\n    <h3 class=\"country-info\">${err.message.slice(0, -3)}</h3>`;\n    countryInfo.insertAdjacentHTML('afterbegin', html);\n  };\n\n  _loadInfo() {\n    const data = this.#countryData;\n    const html = `\n    <h3 class=\"country-info\">You are in ${\n      data.name\n    } <img class=\"country__info__img\" src=\"${this.#countryData.flag}\" />, ${\n      data.region\n    }.</h3>\n    <h3 class=\"country-info margin-sm\">${(+data.population / 1000000).toFixed(\n      1\n    )} million people live in there.</h3>\n    <h3 class=\"country-info margin-md\";>Currency is ${\n      data.currencies[0].name\n    }.</h3>\n    <h3 class=\"country-info margin-lg\";>Citizens speak ${\n      data.languages[0].name\n    }.</h3>\n    <h3 class=\"country-info cursor-p\" id=\"slider\" >Check local time & weather below <span class=\"hand-click\">⤵️</span></h3>\n    `;\n    countryInfo.insertAdjacentHTML('afterbegin', html);\n  }\n\n  _loadMap(position) {\n    (async function () {\n      await this._mapLoadAsync(position);\n      const { latitude: lat, longitude: lng } = position.coords;\n      this.#coords = [lat, lng];\n      await this._getCountryData(...this.#coords);\n    }).call(this);\n  }\n\n  _getJSON = function (url, errorMsg = 'Something went wrong...') {\n    return fetch(url).then(response => {\n      if (!response.ok) throw new Error(`${errorMsg}${response.status}`);\n\n      return response.json();\n    });\n  };\n\n  _renderErr = function (err) {\n    this._clearCountryField();\n    const html = `\n      <article class=\"country\">\n        <div class=\"country__data\">\n        <h3 class=\"country__name\">\n        Error    🤖</h3>\n        <h4 class=\"country__region\">${err.message.slice(0, -3)}</h4>\n        </br>\n        <h4 class=\"country__region\">Try again!</h4>\n        \n        </div>\n      </article>\n      `;\n    countries.insertAdjacentHTML('afterbegin', html);\n    countries.style.opacity = 1;\n    this._clearMarkers();\n    this._loadErrorInfo(err);\n  };\n\n  _getCountryData = async function (lat, lng) {\n    try {\n      const geoData = await this._getJSON(\n        `\n        https://api.geoapify.com/v1/geocode/reverse?lat=${lat}&lon=${lng}&format=json&apiKey=03622f340f754f8dabe96c41591b6149`\n      );\n\n      if (!geoData.results.length)\n        throw new Error('Connection error (refresh the page)!!!!');\n      const countryData = await this._getJSON(\n        `https://countries-api-836d.onrender.com/countries/alpha/${geoData.results[0].country_code}`,\n        'There is no country at this territory!'\n      );\n      this.#countryData = countryData;\n      this._renderCurrInfo();\n      this._clearCountryInfoField();\n      if (this.#countryData) delete this.#countryData[0];\n    } catch (err) {\n      this._renderErr(err);\n    }\n  };\n\n  _getWeatherData = async function (lat, lng) {\n    const weatherData = await this._getJSON(\n      `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lng}&appid=2dfa6f845beab2346b8c0ccea8e5d024`\n    );\n    this.#weatherData = weatherData;\n    this._loadInfo();\n    await this._renderWeatherData(this.#weatherData);\n  };\n\n  _showInfo(mapE) {\n    this.#mapEvent = mapE;\n    const { lat, lng } = mapE.latlng;\n    this.#coords = [];\n    this.#coords = [lat, lng];\n    this._getCountryData(lat, lng);\n  }\n\n  _renderCurrPopup(coords) {\n    const marker = L.marker(coords)\n      .addTo(this.#map)\n      .bindPopup(\n        L.popup({\n          maxWidth: 100,\n          minWidth: 100,\n          // autoClose: false,\n          closeOnClick: false,\n          // className: `${workout.type}-popup`,\n        })\n      )\n      .setPopupContent(\n        `<img class=\"country__img\" style=\"width:10rem; height: 4.5rem\" src=\"${\n          this.#countryData.flag\n        }\" />`\n      )\n      .openPopup();\n    this.#markers.push(marker);\n  }\n\n  _getLocalTime(sec) {\n    const date = new Date();\n    date.setTime(\n      date.getTime() + (sec * 1000 + date.getTimezoneOffset() * 60 * 1000)\n    );\n    return [\n      `${date.getHours()}:${date.getMinutes()}`,\n      `UTC    ${sec < 0 ? '-' : '+'}${Math.abs(sec / 3600)}h`,\n    ];\n  }\n\n  _renderWeatherData(weatherData) {\n    const imgUrl = `https://openweathermap.org/img/wn/${weatherData.weather[0].icon}@2x.png`;\n    const description =\n      weatherData.weather[0].description[0].toUpperCase() +\n      weatherData.weather[0].description.slice(1);\n    const localTime = this._getLocalTime(weatherData.timezone);\n\n    const html = `\n    <h4 class=\"weather\">Weather info:</h4>\n    <p class=\"country__row\"><span>🌡️</span>${(\n      +weatherData.main.temp - 273.15\n    ).toFixed()}℃</p>\n    <p class=\"country__row\"><span>🌄</span>${description}</p>\n    <p class=\"country__row\"><span>🍃</span>${+weatherData.wind.speed.toFixed()} m/sec</p>\n    <h4 class=\"weather\">Local time:</h4>\n    <p class=\"country__row\"><span>⌚</span>${localTime[0]}</p>\n    <p class=\"country__row\"><span>⏳</span>${localTime[1]}</p>\n    </div>`;\n    document\n      .querySelector('.country__data')\n      .insertAdjacentHTML('beforeend', html);\n  }\n\n  _renderCurrInfo() {\n    this._clearMarkers();\n    this._clearCountryField();\n    const data = this.#countryData;\n    this._renderCurrPopup(this.#coords);\n    const html = `\n    <article class=\"country\">\n      <img class=\"country__img\" src=\"${data.flag}\" />\n      <div class=\"country__data\">\n      <h3 class=\"country__name\">${data.name}</h3>\n      <h4 class=\"country__region\">${data.region}</h4>\n      <p class=\"country__row\"><span>🌇</span>${data.capital}</p>\n      <p class=\"country__row\"><span>👫</span>${(\n        +data.population / 1000000\n      ).toFixed(1)} people</p>\n      <p class=\"country__row\"><span>🗣️</span>${data.languages[0].name}</p>\n      <p class=\"country__row\"><span>💰</span>${data.currencies[0].name}</p>\n      </div>\n    </article>\n    `;\n    countries.insertAdjacentHTML('afterbegin', html);\n    countries.style.opacity = 1;\n    this._getWeatherData(...this.#coords);\n  }\n}\n\nconst app = new App();\n"],"names":[],"version":3,"file":"index.44983732.js.map","sourceRoot":"/__parcel_source_root/"}